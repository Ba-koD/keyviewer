# Key Queue Viewer 가이드 (한국어)

이 문서는 Windows + OBS 환경에서 Key Queue Viewer(가변 길이 키 큐 오버레이)를 설치/설정/빌드하는 완전 가이드입니다.

## 기능 요약
- 선택한 창이 포커스일 때만 키 입력 반영
- 눌린 순서대로 칩이 쌓이고, 떼면 제거 (큐)
- 매칭 모드: 제목(포함), 프로세스(정확), HWND, 클래스, 모든 창
- 오버레이 커스터마이즈: 색상(배경/텍스트/칩), 폰트/모서리/패딩, 페이드 시간, 열/행, 정렬(좌/중앙/우), 쌓이는 방향(LTR/RTL)
- 미리보기 + 컬러 피커, 현재 포커스/열린 창 목록, 헤더 클릭 정렬
- EXE 런처: 시작/중지/상태, 관리자 권한 안내, 콘솔 토글, 시작프로그램 등록

## 요구 사항
- Windows 10/11
- 관리자 권한(전역 키 후킹 시 권장)

## 1) 설치/실행
PowerShell(관리자 권장)에서 실행:
```powershell
cd <프로젝트 경로>
Set-ExecutionPolicy Bypass -Scope Process -Force
./run.ps1
```
- 서버 실행 후:
  - Control: `http://127.0.0.1:포트/control`
  - Overlay: `http://127.0.0.1:포트/overlay` (기본 8000)

## 2) 대상 창 설정
Control의 상단에서 설정합니다.
- 모드: 제목/프로세스/HWND/클래스/모든 창
- 값 선택: 모드에 맞는 후보가 드롭다운에 자동 채워짐
- 현재 열려있는 창 표: 제목/프로세스/HWND/클래스, 헤더 클릭 정렬, 제목 클릭 시 해당 창 포커스 이동

## 3) 오버레이 설정
- “오버레이 설정” → 모달에서 색상/레이아웃/정렬/방향/페이드 시간 등을 변경
- 미리보기: cols×rows 규칙을 따르며, rows=0이면 제한 없이 감쌈
- 색상: hex 입력 + 컬러 피커 버튼 지원(투명 배경 옵션)
- 저장 시 오버레이가 즉시 갱신됨(WebSocket)

## 4) OBS 설정
1. 브라우저 소스 추가
2. URL: `http://127.0.0.1:포트/overlay`
3. 사용자 지정 CSS 빈칸으로 설정:
```css
body { background-color: rgba(0,0,0,0); margin: 0; overflow: hidden; }
```
위에꺼 지우기

## 5) EXE 빌드
- 빌드 스크립트:
```powershell
./build_exe.ps1
```
- 포함 내용: 관리자 상승, 실행정책 Bypass, Python/venv 보장, 의존성 설치, 클린 빌드, 아이콘 지정
- 결과: `dist/KeyQueueViewer/KeyQueueViewer.exe`

## 문제 해결
- 정렬/방향이 어긋남: OBS 사용자 지정 CSS의 `margin: 0;` 적용 + 소스 새로고침
- 포트 충돌: 런처가 감지 시 기존 Control을 자동 오픈
- 키가 고정됨: 관리자 권한 실행, 보안 프로그램 확인

## 주의
- “모든 창” 모드는 민감 입력 상황에서 오버레이가 표시될 수 있으므로 주의하세요(2초 지연 확인 포함).